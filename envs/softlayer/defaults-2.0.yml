---
stack_env: softlayer

country_code: US

openstack_install_method: 'source'
#openstack_install_method: 'package'

primary_interface: 'ansible_eth0'
primary_ip: "{{ hostvars[inventory_hostname][primary_interface]['ipv4']['address'] }}"

secrets:
  db_password:      asdf
  mongodb_password: asdf
  service_password: asdf
  rabbit_password:  asdf
  admin_password:   asdf
  stack_domain_admin_password: ydgurtH5erghithge57
  metadata_proxy_shared_secret: asdf
  horizon_secret_key:           asdf
  glance_sync:      ADQ64XUQLUWH75M634RVBLP55RKPGGOWG
  monitor_password: asdf
  telemetry_secret: asdf
  cloud_admin_password: asdf
  project_admin_password: asdf

fqdn: openstack.urstest.jamielennox.net
swift_fqdn: "{{ fqdn }}"
floating_ip: "{{ controller_primary }}"
undercloud_floating_ip: "{{ hostvars[groups['controller'][0]][primary_interface]['ipv4']['address'] }}"

etc_hosts:
  - name: "{{ fqdn }}"
    ip: "{{ floating_ip }}"

state_path_base: /var/lib

rabbitmq:
  port: 5672
  user: openstack
  cluster: false

mongodb:
  port: 27017

memcached:
  memory: 64
  port: 11211
  user: nobody
  max_connections: 1024

swift:
  enabled: False
  logging:
    debug: False

endpoints:
  main:     "{{ fqdn }}"
  db:       "{{ undercloud_floating_ip }}"
  rabbit:   "{{ undercloud_floating_ip }}"
  magnum: "{{ fqdn }}"
  identity_uri: https://{{ fqdn }}:35357
  auth_uri: https://{{ fqdn }}:5000/v2.0

mysql:
  root_password: asdf
xtradb:
  galera_version: 3.x
  client_version: 5.6
  server_version: 5.6
  sst_auth_user: sst_admin
  sst_auth_password: asdf

# TODO(retr0h): Determine the best way to connect to a sensu server.
# Currently, unable to test monitoring in a VM environment, without
# changing the following to a valid sensu server.
monitoring:
  enabled: true
  sensu_package_version: 0.12.5-1
  rabbit:
    host: "{{ undercloud_floating_ip }}"
    port: 5672
    user: openstack
    pass: asdf
  keepalive:
    handler: email
  scan_for_log_errors: true
  openstack:
    user:
      username: monitor
      password: "{{ secrets.monitor_password }}"
      tenant: admin
      role: admin

openstack:
  pypi_mirror: https://pypi.python.org/simple/
  git_mirror:  https://github.com/openstack
  git_update: yes
  pypi_mirror: https://pypi-mirror.openstack.blueboxgrid.com/root/pypi
  easy_install_mirror: https://pypi-mirror.openstack.blueboxgrid.com/root/pypi/+simple
  pip_trusted: pypi-mirror.openstack.blueboxgrid.com
  gem_sources:
    - https://gem-mirror.openstack.blueboxgrid.com
  git_mirror:  https://github.com/openstack
  git_update: yes
  ubuntu_mirror: https://apt-mirror.openstack.blueboxgrid.com/archive.ubuntu.com/ubuntu

apt_repos:
  docker:
    repo: https://apt-mirror.openstack.blueboxgrid.com/docker/ubuntu
    key_url: https://apt-mirror.openstack.blueboxgrid.com/keys/docker.key
  bbg_ubuntu:
    repo: https://apt-mirror.openstack.blueboxgrid.com/bbg_ubuntu/ubuntu
    key_url: https://apt-mirror.openstack.blueboxgrid.com/keys/bbg_ubuntu.key
  blueboxcloud_giftwrap:
    repo: https://apt-mirror.openstack.blueboxgrid.com/blueboxcloud_giftwrap/blueboxcloud/giftwrap/ubuntu
    key_url: https://apt-mirror.openstack.blueboxgrid.com/keys/blueboxcloud_giftwrap.key
  hwraid:
    repo: https://apt-mirror.openstack.blueboxgrid.com/hwraid/ubuntu
    key_url: https://apt-mirror.openstack.blueboxgrid.com/keys/hwraid.key
  sensu:
    repo: https://apt-mirror.openstack.blueboxgrid.com/sensu/apt
    key_url: https://apt-mirror.openstack.blueboxgrid.com/keys/sensu.key
  haproxy:
    repo: https://apt-mirror.openstack.blueboxgrid.com/haproxy/vbernat/haproxy-1.5/ubuntu
    key_url: https://apt-mirror.openstack.blueboxgrid.com/keys/haproxy.key
  bbg_openstack_ppa:
    repo: https://apt-mirror.openstack.blueboxgrid.com/bbg_openstack_ppa/blueboxgroup/openstack/ubuntu
    key_url: https://apt-mirror.openstack.blueboxgrid.com/keys/bbg_openstack_ppa.key
  percona:
    repo: https://apt-mirror.openstack.blueboxgrid.com/percona/apt
    key_url: https://apt-mirror.openstack.blueboxgrid.com/keys/percona.key
  rabbitmq:
    repo: https://apt-mirror.openstack.blueboxgrid.com/rabbitmq/debian
    key_url: https://apt-mirror.openstack.blueboxgrid.com/keys/rabbitmq.key
  cloud_archive:
    repo: https://apt-mirror.openstack.blueboxgrid.com/cloud_archive/ubuntu
  erlang:
    repo: https://apt-mirror.openstack.blueboxgrid.com/erlang/debian
    key_url: https://apt-mirror.openstack.blueboxgrid.com/keys/erlang.key
  ceph:
    repo: https://apt-mirror.openstack.blueboxgrid.com/ceph/debian-
    key_url: https://apt-mirror.openstack.blueboxgrid.com/keys/ceph.key

client:
  self_signed_cert: false

nova:
  libvirt_type: qemu
  api_workers: 1
  conductor_workers: 1
  metadata_api_workers: 1
  reserved_host_disk_mb: 50
  enable_ssh: true
  preallocate_images: none
  logging:
    debug: True
    verbose: True
  novnc_method: file
  novnc_url: https://file-mirror.openstack.blueboxgrid.com/novnc/novnc-0.5.1.tar.gz

ceph:
  enabled: false
  #disks:
  #  - sdb
  #  - sdc
  #  - sdd

cinder:
  enabled: True
  enabled_backends: [] # rbd_volumes for Ceph
  backends: []
    # Ceph
    #- name: rbd_volumes
    #  volume_driver: cinder.volume.drivers.rbd.RBDDriver
  volume_type: file
  volume_file: /opt/stack/cinder-volumes
  volume_file_size: 5G
  #fixed_key: 6a5c55db5e250f234b6af7807dafda77433dddcf372b6d04801a45f578a35aa7
  logging:
    debug: True
    verbose: True
  volume_types: []
  encrypted_volume_types:
    - volume_type: encrypted-aes-512
      cipher: aes-xts-plain64
      key_size: 512
      provider: nova.volume.encryptors.luks.LuksEncryptor
      control_location: front-end

neutron:
  plugin: ml2
  bridge_mappings: ''
  network_vlan_ranges: ''
  tenant_network_type: vxlan
  tunnel_types:
    - vxlan
  lbaas:
    enable: False
  logging:
    debug: True
    verbose: True
  networks:
    - name: internal
      shared: true
      external: false
      network_type: vxlan
      segmentation_id: 256
      provider_physical_network: ~
    - name: external
      shared: false
      external: true
      network_type: local
      segmentation_id: ~
      provider_physical_network: ~
  subnets:
    - name: internal_v4
      network_name: internal
      ip_version: 4
      cidr: 172.16.255.0/24
      pool_start: 172.16.255.2
      pool_end: 172.16.255.254
      enable_dhcp: "true"
      gateway_ip: 172.16.255.1
      dns_nameservers: '8.8.8.8,8.8.4.4'
    - name: internal_v6
      network_name: internal
      ip_version: 6
      cidr: 2db8:1::/64
      enable_dhcp: "true"
      gateway_ip: 2db8:1::1
      ipv6_address_mode: dhcpv6-stateless
      ipv6_ra_mode: dhcpv6-stateless
      dns_nameservers: '2001:4860:4860::8888,2001:4860:4860::8844'
    - name: external
      network_name: external
      ip_version: 4
      cidr: 192.168.255.0/24
      enable_dhcp: "false"
      gateway_ip: 192.168.255.1
      dns_nameservers: '8.8.8.8,8.8.4.4'
  routers:
    - name: default
      tenant_name: admin
  router_interfaces:
    - router_name: default
      subnet_name: internal_v4
      tenant_name: admin
    - router_name: default
      subnet_name: internal_v6
      tenant_name: admin
  service:
    envs:
      - "REQUESTS_CA_BUNDLE=/etc/ssl/certs/ca-certificates.crt"
  tenant_nameservers:
    - 8.8.4.4
    - 8.8.8.8
  enable_external_interface: True

glance:
  api_workers: 1
  registry_workers: 1
  logging:
    debug: True
    verbose: True
  images:
    - name: cirros
      url: https://file-mirror.openstack.blueboxgrid.com/cloud-images/cirros-0.3.3-x86_64-disk.img

keystone:
  token_expiration_in_seconds: 86400
  logging:
    debug: True
    verbose: True
  tenants:
    - admin
    - service
    - demo
  users:
    - name: admin
      password: "{{ secrets.admin_password }}"
      tenant: admin
    - name: demo
      password: demopass
      tenant: demo
    - name: nova
      password: "{{ secrets.service_password }}"
      tenant: service
    - name: glance
      password: "{{ secrets.service_password }}"
      tenant: service
    - name: neutron
      password: "{{ secrets.service_password }}"
      tenant: service
    - name: cinder
      password: "{{ secrets.service_password }}"
      tenant: service
    - name: heat
      password: "{{ secrets.service_password }}"
      tenant: service
    - name: ceilometer
      password: "{{ secrets.service_password }}"
      tenant: service
    - name: ironic
      password: "{{ secrets.service_password }}"
      tenant: service
    - name: magnum
      password: "{{ secrets.service_password }}"
      tenant: service
    - name: "{{ monitoring.openstack.user.username }}"
      password: "{{ monitoring.openstack.user.password }}"
      tenant: "{{ monitoring.openstack.user.tenant }}"
    - name: swift
      password: "{{ secrets.service_password }}"
      tenant: service
    - name: cloud_admin
      password: "{{ secrets.cloud_admin_password }}"
      tenant: demo
    - name: project_admin
      password: "{{ secrets.project_admin_password }}"
      tenant: demo
  user_roles:
    - user: admin
      tenant: admin
      role: admin
    - user: admin
      tenant: demo
      role: cloud_admin
    - user: admin
      tenant: service
      role: admin
    - user: nova
      tenant: service
      role: service
    - user: glance
      tenant: service
      role: service
    - user: neutron
      tenant: service
      role: service
    - user: neutron
      tenant: service
      role: admin
    - user: cinder
      tenant: service
      role: service
    - user: heat
      tenant: service
      role: service
    - user: ceilometer
      tenant: service
      role: service
    - user: ceilometer
      tenant: service
      role: admin
    - user: magnum
      tenant: service
      role: service
    - user: ironic
      tenant: service
      role: service
    - user: "{{ monitoring.openstack.user.username }}"
      tenant: "{{ monitoring.openstack.user.tenant }}"
      role: "{{ monitoring.openstack.user.role }}"
    - user: swift
      tenant: service
      role: admin
    - user: cloud_admin
      tenant: demo
      role: cloud_admin
    - user: project_admin
      tenant: demo
      role: project_admin
  services:
    - name: keystone
      type: identity
      description: 'Identity Service'
      public_url: "{{ endpoints.keystone.url.public }}/{{ endpoints.keystone.version }}"
      internal_url: "{{ endpoints.keystone.url.internal }}/{{ endpoints.keystone.version }}"
      admin_url: "{{ endpoints.keystone.url.admin }}/{{ endpoints.keystone.version }}"
    - name: keystonev3
      type: identityv3
      description: 'Identity Service v3'
      public_url: "{{ endpoints.keystone.url.public }}/{{ endpoints.keystonev3.version }}"
      internal_url: "{{ endpoints.keystone.url.internal }}/{{ endpoints.keystonev3.version }}"
      admin_url: "{{ endpoints.keystone.url.admin }}/{{ endpoints.keystonev3.version }}"
    - name: nova
      type: compute
      description: 'Compute Service'
      public_url: "{{ endpoints.nova.url.public }}/{{ endpoints.nova.url.path }}"
      internal_url: "{{ endpoints.nova.url.internal }}/{{ endpoints.nova.url.path }}"
      admin_url: "{{ endpoints.nova.url.admin }}/{{ endpoints.nova.url.path }}"
    - name: glance
      type: image
      description: 'Image Service'
      public_url: "{{ endpoints.glance.url.public }}"
      internal_url: "{{ endpoints.glance.url.internal }}"
      admin_url: "{{ endpoints.glance.url.admin }}"
    - name: neutron
      type: network
      description: 'Network Service'
      public_url: "{{ endpoints.neutron.url.public }}"
      internal_url: "{{ endpoints.neutron.url.internal }}"
      admin_url: "{{ endpoints.neutron.url.admin }}"
    - name: cinder
      type: volume
      description: 'Volume Service'
      public_url: "{{ endpoints.cinder.url.public }}/{{ endpoints.cinder.url.path }}"
      internal_url: "{{ endpoints.cinder.url.internal }}/{{ endpoints.cinder.url.path }}"
      admin_url: "{{ endpoints.cinder.url.admin }}/{{ endpoints.cinder.url.path }}"
    - name: cinderv2
      type: volumev2
      description: 'Volume Service v2'
      public_url: "{{ endpoints.cinderv2.url.public }}/{{ endpoints.cinderv2.url.path }}"
      internal_url: "{{ endpoints.cinderv2.url.internal }}/{{ endpoints.cinderv2.url.path }}"
      admin_url: "{{ endpoints.cinderv2.url.admin }}/{{ endpoints.cinderv2.url.path }}"
    - name: heat
      type: orchestration
      description: 'Heat Orchestration API'
      public_url: "{{ endpoints.heat.url.public }}/{{ endpoints.heat.url.path }}"
      internal_url: "{{ endpoints.heat.url.internal }}/{{ endpoints.heat.url.path }}"
      admin_url: "{{ endpoints.heat.url.admin }}/{{ endpoints.heat.url.path }}"
    - name: heat-cfn
      type: cloudformation
      description: 'Heat CloudFormation API'
      public_url: "{{ endpoints.heat_cfn.url.public }}/{{ endpoints.heat_cfn.version }}"
      internal_url: "{{ endpoints.heat_cfn.url.internal }}/{{ endpoints.heat_cfn.version }}"
      admin_url: "{{ endpoints.heat_cfn.url.admin }}/{{ endpoints.heat_cfn.version }}"
    - name: ceilometer
      type: metering
      description: 'Telemetry Service'
      public_url: "{{ endpoints.ceilometer.url.public }}"
      internal_url: "{{ endpoints.ceilometer.url.internal }}"
      admin_url: "{{ endpoints.ceilometer.url.admin }}"
    - name: ironic
      type: baremetal
      description: 'Ironic bare metal provisioning service'
      public_url: "{{ endpoints.ironic.url.public }}"
      internal_url: "{{ endpoints.ironic.url.internal }}"
      admin_url: "{{ endpoints.ironic.url.admin }}"
    - name: swift
      type: object-store
      description: 'Object Storage Service'
      public_url: "{{ endpoints.swift.url.public }}/{{ endpoints.swift.url.path }}"
      internal_url: "{{ endpoints.swift.url.internal }}/{{ endpoints.swift.url.path }}"
      admin_url: "{{ endpoints.swift.url.admin }}/{{ endpoints.swift.url.path }}"
    - name: magnum
      type: container
      description: 'Magnum Container Service'
      public_url: https://{{ endpoints.main }}:9511
      internal_url: https://{{ endpoints.main }}:9511
      admin_url: https://{{ endpoints.main }}:9511

cacerts:
  - name: arrrsula
    content: |
      -----BEGIN CERTIFICATE-----
      MIIDeTCCAmGgAwIBAgIJAJ9JFCfNJlVjMA0GCSqGSIb3DQEBCwUAMFMxCzAJBgNV
      BAYTAkFVMQwwCgYDVQQIDANOU1cxDzANBgNVBAcMBlN5ZG5leTEQMA4GA1UECgwH
      cHlycnJhdDETMBEGA1UEAwwKcHlycnJhdC1jYTAeFw0xNjAyMDkyMjUyMzVaFw0y
      NjAyMDYyMjUyMzVaMFMxCzAJBgNVBAYTAkFVMQwwCgYDVQQIDANOU1cxDzANBgNV
      BAcMBlN5ZG5leTEQMA4GA1UECgwHcHlycnJhdDETMBEGA1UEAwwKcHlycnJhdC1j
      YTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMWwGcNQn8gWx3+CsJ7c
      yTb1VNQpZL76OscWih6JNd7jmFFl1EOWYjU/JiEirrif/ZtXzU/IxiBmeThgoTaD
      yhwLdrsDTJgHc5gr+yzOpqA3u/QdfFcZkLkbySZZSmc7zmxxyb5JYfg+Jamnn1St
      e4uba8Q81836XX6fTKzEShQ0c/LvHbauOM5Q46xwCG0ZJ0m690jxoGSc7GuRNOoZ
      FGQHE2WyNaWKLvBj6gNd7BDXxNsttBFdH8AxTodl4Xl6Etrmp0HGJdUlwh4hHDUa
      EsgYPm+eVRf0C2xtmoU3+ElapJqKNeVs2ur0x1cDKOFXRwl3G/FPb6W6aZUtJZRN
      yl8CAwEAAaNQME4wHQYDVR0OBBYEFMvtiZR44PVf3JWxyYQLZfbX54qbMB8GA1Ud
      IwQYMBaAFMvtiZR44PVf3JWxyYQLZfbX54qbMAwGA1UdEwQFMAMBAf8wDQYJKoZI
      hvcNAQELBQADggEBADfzdhESThmswxoKvOPwIFYpgj3Bmycnw3/yEmerYm3mrOIi
      MRFUN8ytOjBLuQiMneAO4Ua0pxjMouNZa8Sv7GDlw9dFK6ANJy8BXAn0y2DWtA35
      RVPJXhWikUKNbbfCiT3u31rBkhrRwL+Ipf8gGsuu4dpaqwf/xOaWvjC8nDF3CzQy
      QkFHW49Orv/ZKyiMBjFWnNIhXDM1oCI9pfE+2x9IrxhNv+6LB7uQXzae7+paK80H
      1iGZvCSoXE8Y9Jq5vIkHIB4DtdLnGOzMPbHvJ4l8pviRsSinDOF61M5CLDkgqO60
      3Bs4uGawJ5HChJLeYepKAZ37MEMcc32Xf8iQhcY=
      -----END CERTIFICATE-----

openstack_setup:
  add_users: True
  add_images: True
  add_networks: True
  add_cinder: True

percona:
  replication: True

common:
  ipmi:
    enabled: False
    state: probe
  system_tools:
    mcelog: False
  ursula_monitoring:
    method: tar # git|tar
    tar_url: https://file-mirror.openstack.blueboxgrid.com/ursula-monitoring/master.tar.gz
    tar_version: master
  ntpd:
    servers: []
    #  - servertime.service.softlayer.com

heat:
  enabled: True
  logging:
    debug: True
    verbose: True

ceilometer:
  enabled: False
  logging:
    debug: True
    verbose: True

ironic:
  enabled: False
  logging:
    debug: True
    verbose: True

docker:
  enabled: False

novadocker:
  enabled: False

haproxy:
  enabled: True

logging:
  enabled: True
  download:
    url: https://file-mirror.openstack.blueboxgrid.com/logstash/logstash-forwarder_0.3.1_amd64.deb

keystonev3:
  enabled: True

cinderv2:
  enabled: True

heat-cfn:
  enabled: True

magnum:
  enabled: True
  debug: True

horizon:
  logo_url: https://file-mirror.openstack.blueboxgrid.com/horizon-branding/bluebox-u1.1.x.png
  favicon_url: https://file-mirror.openstack.blueboxgrid.com/horizon-branding/bluebox.ico
